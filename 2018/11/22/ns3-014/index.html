<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.4.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="本章主要介绍NS-3当中的哈希函数的使用。NS-3提供了一个使用哈希函数的通用的接口。可以方便地调用内置的哈希函数来将一个字节数组或者字符串转换成一个哈希值。根据底层算法的不同，哈希值可以是32位或者是64位的整数。NS-3默认使用的哈希算法是murmur3，它可以返回32和64位的值。可以轻易地使用其他哈希算法实现。如果NS-3所提供的哈希实现都无法达到要求，也可以方便地添加自己的实现。">
<meta name="keywords" content="NS-3,C++,Simulation,Hashing,Hash Functions,murmur3,FNV1a">
<meta property="og:type" content="article">
<meta property="og:title" content="NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions）">
<meta property="og:url" content="http://rainsia.gitee.io/2018/11/22/ns3-014/index.html">
<meta property="og:site_name" content="Rain&#39;s Blog">
<meta property="og:description" content="本章主要介绍NS-3当中的哈希函数的使用。NS-3提供了一个使用哈希函数的通用的接口。可以方便地调用内置的哈希函数来将一个字节数组或者字符串转换成一个哈希值。根据底层算法的不同，哈希值可以是32位或者是64位的整数。NS-3默认使用的哈希算法是murmur3，它可以返回32和64位的值。可以轻易地使用其他哈希算法实现。如果NS-3所提供的哈希实现都无法达到要求，也可以方便地添加自己的实现。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-11-22T13:06:44.434Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions）">
<meta name="twitter:description" content="本章主要介绍NS-3当中的哈希函数的使用。NS-3提供了一个使用哈希函数的通用的接口。可以方便地调用内置的哈希函数来将一个字节数组或者字符串转换成一个哈希值。根据底层算法的不同，哈希值可以是32位或者是64位的整数。NS-3默认使用的哈希算法是murmur3，它可以返回32和64位的值。可以轻易地使用其他哈希算法实现。如果NS-3所提供的哈希实现都无法达到要求，也可以方便地添加自己的实现。">






  <link rel="canonical" href="http://rainsia.gitee.io/2018/11/22/ns3-014/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions） | Rain's Blog</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9d1df7de5bd3ea1d75446764f5075fe7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rain's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">记录、分享、技术</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rainsia.gitee.io/2018/11/22/ns3-014/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rain Sia <rainsia@163.com>">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rain's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-22 09:30:42 / 修改时间：21:06:44" itemprop="dateCreated datePublished" datetime="2018-11-22T09:30:42+08:00">2018-11-22</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/network/" itemprop="url" rel="index"><span itemprop="name">网络</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/network/simulation/" itemprop="url" rel="index"><span itemprop="name">仿真</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/network/simulation/NS-3/" itemprop="url" rel="index"><span itemprop="name">NS-3</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/22/ns3-014/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/22/ns3-014/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon"
            >
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>本章主要介绍NS-3当中的哈希函数的使用。NS-3提供了一个使用哈希函数的通用的接口。可以方便地调用内置的哈希函数来将一个字节数组或者字符串转换成一个哈希值。根据底层算法的不同，哈希值可以是32位或者是64位的整数。NS-3默认使用的哈希算法是murmur3，它可以返回32和64位的值。可以轻易地使用其他哈希算法实现。如果NS-3所提供的哈希实现都无法达到要求，也可以方便地添加自己的实现。</p>
<a id="more"></a>
<h1 id="1-哈希函数简介"><a href="#1-哈希函数简介" class="headerlink" title="1. 哈希函数简介"></a>1. 哈希函数简介</h1><p>Hash，一般翻译做“散列”，也有直接音译为“哈希”的，就是把任意长度的输入（又叫做预映射pre-image）通过散列算法变换成固定长度的输出，该输出就是散列值。这种转换是一种压缩映射，也就是，散列值的空间通常远小于输入的空间，不同的输入可能会散列成相同的输出，所以不可能从散列值来确定唯一的输入值。</p>
<p>所有哈希函数都有如下一个基本特性：如果两个同一哈希算法生成的值是不相同的，那么这两个散列值的原始输入也是不相同的。这个特性是散列函数具有确定性的结果。但另一方面，散列函数的输入和输出不是一一对应的，如果两个散列值相同，两个输入值很可能是相同的，但不绝对肯定二者一定相等（即可能出现哈希碰撞）。输入一些数据计算出散列值，然后部分改变输入值，一个具有强混淆特性的散列函数会产生一个完全不同的散列值。</p>
<p>哈希函数在不同的领域具有广泛的应用：</p>
<ul>
<li>数据校验 （例如网络数据包当中常用的CRC检验，文件的MD5或SHA-1校验）</li>
<li>数字签名 （为了提高认证速度，RSA当中只对摘要部分签名）</li>
<li>高速数据查询 （例如Openflow当中的流表查询，Java当中的HashMap查询）</li>
<li>网络负载均衡 （例如ECMP协议实现的负载均衡）</li>
<li>数据缓存 （例如Redis分布式缓存系统）</li>
<li>……</li>
</ul>
<p>值得注意的是，由于哈希函数的应用的多样性，它们经常是专为某一应用而设计的。例如，加密散列函数假设存在一个要找到具有相同散列值的原始输入的敌人。一个设计优秀的加密散列函数是一个“单向”操作：对于给定的散列值，没有实用的方法可以计算出一个原始输入，也就是说很难伪造。为加密散列为目的设计的函数，如MD5，被广泛的用作检验散列函数。这样软件下载的时候，就会对照验证代码之后才下载正确的文件部分。此代码有可能因为环境因素的变化，如机器配置或者IP地址的改变而有变动。以保证源文件的安全性。对于用于负载均衡的哈希应用，设计的目标就是希望在大量的数据出现的情况下，哈希值尽量呈现均匀分布的特性。</p>
<h1 id="2-NS-3哈希算法的使用"><a href="#2-NS-3哈希算法的使用" class="headerlink" title="2. NS-3哈希算法的使用"></a>2. NS-3哈希算法的使用</h1><h2 id="2-1-简单的用法"><a href="#2-1-简单的用法" class="headerlink" title="2.1. 简单的用法"></a>2.1. 简单的用法</h2><p>在NS-3当中，如果只是简单的想使用哈希算法得到哈希值，那么最简单的方法就是直接调用封装好的哈希函数即可。首先我们自己要明白需要32位哈希值还是64位哈希值。确定好之后才能选择调用不同的版本。NS-3当中为32位版本和64位版本分别提供了两个重载：</p>
<figure class="highlight cpp"><figcaption><span>hash.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint32_t</span> Hash32 (<span class="keyword">const</span> <span class="keyword">char</span> * buffer, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> size);</span><br><span class="line"><span class="keyword">uint32_t</span> Hash32 (<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> s);</span><br><span class="line"></span><br><span class="line"><span class="keyword">uint64_t</span> Hash64 (<span class="keyword">const</span> <span class="keyword">char</span> * buffer, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> size);</span><br><span class="line"><span class="keyword">uint64_t</span> Hash64 (<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> s);</span><br></pre></td></tr></table></figure>
<p>一个版本接受一个字节数组（以及需要编码的部分的长度），另外一个版本接受一个字符串作为参数。最终返回32位或者64位整数。下面通过一个简单的例子来演示最简单的哈希函数的使用：</p>
<figure class="highlight cpp"><figcaption><span>try-simple-hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ns3/core-module.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ns3;</span><br><span class="line"></span><br><span class="line">NS_LOG_COMPONENT_DEFINE (<span class="string">"TrySimpleHash"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> </span><br><span class="line">main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  LogComponentEnable(<span class="string">"TrySimpleHash"</span>, LOG_LEVEL_INFO);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key</span> <span class="params">(<span class="string">"The quick brown fox jumped over the lazy dogs."</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">uint32_t</span> hash32 = Hash32 (key);</span><br><span class="line">  <span class="keyword">uint64_t</span> hash64 = Hash64 (key);</span><br><span class="line"></span><br><span class="line">  NS_LOG_INFO(<span class="string">"32bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">8</span>) &lt;&lt; hash32 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line">  NS_LOG_INFO(<span class="string">"64bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">16</span>) &lt;&lt; hash64 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line"></span><br><span class="line">  Simulator::Run ();</span><br><span class="line">  Simulator::Destroy ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行程序，得到如下结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Waf: Entering directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">[1928/2051] Compiling scratch/try-simple-hash.cc</span><br><span class="line">[2028/2051] Linking build/scratch/try-simple-hash</span><br><span class="line">Waf: Leaving directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">Build commands will be stored in build/compile_commands.json</span><br><span class="line">&apos;build&apos; finished successfully (9.515s)</span><br><span class="line">32bit hash: 0x463d70e2</span><br><span class="line">64bit hash: 0xa750412079d53e04</span><br></pre></td></tr></table></figure>
<p>程序最后输出了32位和64位版本的哈希值，可见，在NS-3当中如果只是想简单地获取哈希值，用法是非常方便。</p>
<p>继续查看代码：</p>
<figure class="highlight cpp"><figcaption><span>hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Hasher::Hasher ()</span><br><span class="line">&#123;</span><br><span class="line">  m_impl = Create &lt;Hash::Function::Murmur3&gt; ();</span><br><span class="line">  NS_ASSERT (m_impl != <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span></span><br><span class="line"><span class="keyword">uint32_t</span></span><br><span class="line">Hash32 (<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> s)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> Hasher ().GetHash32 (s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span></span><br><span class="line"><span class="keyword">uint64_t</span></span><br><span class="line">Hash64 (<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> s)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> Hasher ().GetHash64 (s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从代码中可以看出，默认的哈希实现算法是murmur3。这个算法运算速度非常快，但是碰撞率比较低，其最新版本是3，是作者加入Google之后对murmur2的改进。其实现原理在<a href="https://en.wikipedia.org/wiki/MurmurHash" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="2-2-进阶版用法"><a href="#2-2-进阶版用法" class="headerlink" title="2.2. 进阶版用法"></a>2.2. 进阶版用法</h2><p>哈希函数的简单用法的问题在于只能使用默认的murmur3算法，虽然这种算法已经很好了，但是正如前面所说的，不同的应用领域对哈希算法的需求是不一样的。因此，我们更希望能够自己指定哈希算法。</p>
<p>实际上，从刚刚的源代码分析也不难看出，其最终还是依赖于一个名为Hasher的类。这个类当中提供了两个构造方法：</p>
<figure class="highlight cpp"><figcaption><span>hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Hasher::Hasher ()</span><br><span class="line">&#123;</span><br><span class="line">  m_impl = Create &lt;Hash::Function::Murmur3&gt; ();</span><br><span class="line">  NS_ASSERT (m_impl != <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Hasher::Hasher (Ptr&lt;Hash::Implementation&gt; hp)</span><br><span class="line">  : m_impl (hp)</span><br><span class="line">&#123;</span><br><span class="line">  NS_ASSERT (m_impl != <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第一个构造方法默认创建了Murmur3对象。第二个构造函数可以让用户自己传入需要的哈希算法实现类。目前NS-3当中只默认提供了两种实现：一个就是刚刚用过的murmur3算法，另外一个就是FNV-1a算法，其实现原理可以看<a href="http://isthe.com/chongo/tech/comp/fnv/" target="_blank" rel="noopener">这里</a>。下面我们通过一个简单的例子来演示如何指定哈希算法：</p>
<figure class="highlight cpp"><figcaption><span>try-fnv-hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ns3/core-module.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ns3;</span><br><span class="line"></span><br><span class="line">NS_LOG_COMPONENT_DEFINE (<span class="string">"TryFnvHash"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> </span><br><span class="line">main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  LogComponentEnable(<span class="string">"TryFnvHash"</span>, LOG_LEVEL_INFO);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key</span> <span class="params">(<span class="string">"The quick brown fox jumped over the lazy dogs."</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  Hasher hasher(Create&lt;Hash::Function::Fnv1a&gt; ());</span><br><span class="line">  <span class="keyword">uint32_t</span> hash32 = hasher.GetHash32(key);</span><br><span class="line">  <span class="comment">//要清空</span></span><br><span class="line">  <span class="keyword">uint64_t</span> hash64 = hasher.clear().GetHash64(key);</span><br><span class="line"></span><br><span class="line">  NS_LOG_INFO(<span class="string">"32bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">8</span>) &lt;&lt; hash32 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line">  NS_LOG_INFO(<span class="string">"64bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">16</span>) &lt;&lt; hash64 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line"></span><br><span class="line">  Simulator::Run ();</span><br><span class="line">  Simulator::Destroy ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序关键点在于创建Hasher的时候通过构造函数参数制定了底层使用的哈希算法。另外一个值得注意的点在于使用这种方法，每次计算全新的数据的时候必须先清空（调用clear()方法），否则会变成和前面的数据累加，结果会不正确。运行程序，得到如下结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Waf: Entering directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">[1968/2053] Compiling scratch/try-fnv-hash.cc</span><br><span class="line">[2043/2053] Linking build/scratch/try-fnv-hash</span><br><span class="line">Waf: Leaving directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">Build commands will be stored in build/compile_commands.json</span><br><span class="line">&apos;build&apos; finished successfully (7.826s)</span><br><span class="line">32bit hash: 0xa3fc0d6d</span><br><span class="line">64bit hash: 0x88f6cdbe0a31098d</span><br></pre></td></tr></table></figure>
<h2 id="2-3-分段（增量）哈希"><a href="#2-3-分段（增量）哈希" class="headerlink" title="2.3. 分段（增量）哈希"></a>2.3. 分段（增量）哈希</h2><p>通过上面的例子，我们可以看到，每次要计算新的哈希值时，必须先调用clear()方法，把之前的数据清空。而如果没有清空数据，将会和上次的数据进行累加。这可以实现一种称为增量哈希的方法。你通过一个简单的例子来解释。</p>
<figure class="highlight cpp"><figcaption><span>try-incremental-hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ns3/core-module.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ns3;</span><br><span class="line"></span><br><span class="line">NS_LOG_COMPONENT_DEFINE (<span class="string">"TryIncrementalHash"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> </span><br><span class="line">main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  LogComponentEnable(<span class="string">"TryIncrementalHash"</span>, LOG_LEVEL_INFO);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key1</span> <span class="params">(<span class="string">"The quick brown fox "</span>)</span></span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key2</span> <span class="params">(<span class="string">"jumped over the lazy dogs."</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  Hasher hasher(Create&lt;Hash::Function::Fnv1a&gt; ());</span><br><span class="line">  <span class="keyword">uint32_t</span> hash32 = hasher.GetHash32(key1);</span><br><span class="line">  hash32 = hasher.GetHash32(key2);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">uint64_t</span> hash64 = hasher.clear().GetHash64(key1);</span><br><span class="line">  hash64 = hasher.GetHash64(key2);</span><br><span class="line"></span><br><span class="line">  NS_LOG_INFO(<span class="string">"32bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">8</span>) &lt;&lt; hash32 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line">  NS_LOG_INFO(<span class="string">"64bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">16</span>) &lt;&lt; hash64 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line"></span><br><span class="line">  Simulator::Run ();</span><br><span class="line">  Simulator::Destroy ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序中，我们将原来要计算哈希值的字符串分成了两段，每次只往hasher里面添加一段，然后再添加另一段。而在计算32位和64位的哈希值时，中间做了清空。运行程序之后，得到如下结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Waf: Entering directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">[1984/2055] Compiling scratch/try-incremental-hash.cc</span><br><span class="line">[2054/2055] Linking build/scratch/try-incremental-hash</span><br><span class="line">Waf: Leaving directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">Build commands will be stored in build/compile_commands.json</span><br><span class="line">&apos;build&apos; finished successfully (7.911s)</span><br><span class="line">32bit hash: 0xa3fc0d6d</span><br><span class="line">64bit hash: 0x88f6cdbe0a31098d</span><br></pre></td></tr></table></figure>
<p>对比前面的运行结果，我们发现，分段计算的结果和完整计算的结果完全相同，说明他们具有一样的效果。</p>
<p>总结：如果不希望使用增量哈希，那么请习惯每次计算哈希值的时候都清空，养成如下调用哈希算法的习惯：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hasher.clear ().GetHash32 (key)</span><br></pre></td></tr></table></figure>
<h1 id="3-添加自定义的哈希算法"><a href="#3-添加自定义的哈希算法" class="headerlink" title="3. 添加自定义的哈希算法"></a>3. 添加自定义的哈希算法</h1><p>不同的应用对哈希算法性能的诉求是不一样的，因此，NS-3的内置哈希算法多半都不能满足需求。我们可以使用满足NS-3哈希算法接口的方式实现自己的哈希算法来满足自己的需求。如果哈希算法比较简单，可以使用一个函数表示，那么可以使用添加哈希函数的方式来实现。如果哈希算法比较复杂，内部必须有复杂的数据传递和方法调用，那么更建议使用添加类的方法来实现。</p>
<h2 id="3-1-添加哈希函数"><a href="#3-1-添加哈希函数" class="headerlink" title="3.1. 添加哈希函数"></a>3.1. 添加哈希函数</h2><p>如果你自己实现的哈希算法比较简单，完全可以使用一个函数来实现，那么推荐使用添加哈希函数的方法来实现。只需添加一组符合NS-3哈希算法接口的函数即可。下面通过一个简单的例子来演示如何通过函数的方式来添加哈希算法实现。</p>
<p>例如，NS-3当中我们想在NS-3当中添加ELF哈希算法。这是一个Unix和Linux系统内核当中使用的一个哈希算法，由于它主要在Linux的可执行文件格式ELF(Executable and Linking Format)中使用，所以取名为ELF哈希。这个算法中，字符串中每个字符都有同样的作用，它巧妙地对字符的ASCII编码值进行计算，ELF哈希函数对于能够比较均匀地把字符串分布在散列表中。因此，任意修改一个字符对哈希值都有很大影响，符合哈希函数的需求。</p>
<p>实现的算法函数必须符合如下的文件签名：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint32_t</span> hash_name32(<span class="keyword">const</span> <span class="keyword">char</span> * data, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> size);</span><br><span class="line"><span class="keyword">uint64_t</span> hash_name64(<span class="keyword">const</span> <span class="keyword">char</span> * data, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> size);</span><br></pre></td></tr></table></figure>
<p>随后可以通过如下方法来创建哈希函数类：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hasher hasher = Hasher ( Create&lt;Hash::Function::Hash32&gt; (&amp;hash_name32) );</span><br><span class="line">Hasher hasher = Hasher ( Create&lt;Hash::Function::Hash64&gt; (&amp;hash_name64) );</span><br></pre></td></tr></table></figure>
<p>然后即可通过hasher来计算哈希值，过程和之前的例子一致。下面我们就开始实现ELFHash算法。</p>
<figure class="highlight cpp"><figcaption><span>try-function-hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ns3/core-module.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ns3;</span><br><span class="line"></span><br><span class="line">NS_LOG_COMPONENT_DEFINE (<span class="string">"TryFunctionHash"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">uint32_t</span> ELFHash(<span class="keyword">const</span> <span class="keyword">char</span>* str, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> length)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">uint32_t</span> hash = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">uint32_t</span> x    = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">uint32_t</span> i    = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length; ++str, ++i)</span><br><span class="line">   &#123;</span><br><span class="line">      hash = (hash &lt;&lt; <span class="number">4</span>) + (*str);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ((x = hash &amp; <span class="number">0xF0000000</span>L) != <span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">         hash ^= (x &gt;&gt; <span class="number">24</span>);</span><br><span class="line">         hash &amp;= ~x;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> </span><br><span class="line">main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  LogComponentEnable(<span class="string">"TryFunctionHash"</span>, LOG_LEVEL_INFO);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key</span> <span class="params">(<span class="string">"The quick brown fox jumped over the lazy dogs."</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  Hasher hasher(Create&lt;Hash::Function::Hash32&gt; (&amp;ELFHash));</span><br><span class="line">  <span class="keyword">uint32_t</span> hash32 = hasher.GetHash32(key);</span><br><span class="line"></span><br><span class="line">  NS_LOG_INFO(<span class="string">"32bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">8</span>) &lt;&lt; hash32 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line"></span><br><span class="line">  Simulator::Run ();</span><br><span class="line">  Simulator::Destroy ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行程序得到如下结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Waf: Entering directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">[1912/2057] Compiling scratch/try-function-hash.cc</span><br><span class="line">[2017/2057] Linking build/scratch/try-function-hash</span><br><span class="line">Waf: Leaving directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">Build commands will be stored in build/compile_commands.json</span><br><span class="line">&apos;build&apos; finished successfully (14.754s)</span><br><span class="line">32bit hash: 0x e75160e</span><br></pre></td></tr></table></figure>
<h2 id="3-2-添加哈希类"><a href="#3-2-添加哈希类" class="headerlink" title="3.2. 添加哈希类"></a>3.2. 添加哈希类</h2><p>如果算法比较复杂，则可以通过类的方式来实现。这个类必须继承ns3::Hash::Implementation类。其中ns3、Hash是名称空间，而Implementation才是类名。然后实现其中的GetHash32()和clear()方法，而GetHash64()方法可以不实现，也可以实现，如果不实现，那么自动返回32位的结果值。</p>
<p>例如，我们需要实现CRC(Cyclic Redundant Checksum)这个算法。可以实现CRC类，然后实现32位或者64位算法。然后即可按照之前的方法创建Hasher类的实例即可。当然这个例子选得不好，即无需增量计算，也没有复杂的内部调用或者中间变量需要在类的内部传递。就凑合着看看吧。按照NS-3的管理，我们还是将哈希算法的类放到ns3::Hash::Function::名称空间下，这样可以避免和其他用途的类重名的风险。代码如下：</p>
<figure class="highlight cpp"><figcaption><span>try-class-hash.cc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ns3/core-module.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> ns3;</span><br><span class="line"></span><br><span class="line">NS_LOG_COMPONENT_DEFINE (<span class="string">"TryClassHash"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> ns3 &#123;</span><br><span class="line">  <span class="keyword">namespace</span> Hash &#123;</span><br><span class="line">    <span class="keyword">namespace</span> Function &#123;</span><br><span class="line">      <span class="class"><span class="keyword">class</span> <span class="title">CRC</span> :</span> <span class="keyword">public</span> ns3::Hash::Implementation</span><br><span class="line">      &#123;</span><br><span class="line">      <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">uint32_t</span>  GetHash32  (<span class="keyword">const</span> <span class="keyword">char</span> * buffer, <span class="keyword">const</span> <span class="keyword">size_t</span> size);</span><br><span class="line">        <span class="keyword">uint64_t</span>  GetHash64  (<span class="keyword">const</span> <span class="keyword">char</span> * buffer, <span class="keyword">const</span> <span class="keyword">size_t</span> size);</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">clear</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line">      <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">uint32_t</span> m_CRC32_Table[<span class="number">256</span>] = &#123;</span><br><span class="line">          <span class="number">0x00000000</span>L, <span class="number">0x77073096</span>L, <span class="number">0xEE0E612C</span>L,</span><br><span class="line">          <span class="number">0x990951BA</span>L, <span class="number">0x076DC419</span>L, <span class="number">0x706AF48F</span>L,</span><br><span class="line">          <span class="number">0xE963A535</span>L, <span class="number">0x9E6495A3</span>L, <span class="number">0x0EDB8832</span>L,</span><br><span class="line">          <span class="number">0x79DCB8A4</span>L, <span class="number">0xE0D5E91E</span>L, <span class="number">0x97D2D988</span>L,</span><br><span class="line">          <span class="number">0x09B64C2B</span>L, <span class="number">0x7EB17CBD</span>L, <span class="number">0xE7B82D07</span>L,</span><br><span class="line">          <span class="number">0x90BF1D91</span>L, <span class="number">0x1DB71064</span>L, <span class="number">0x6AB020F2</span>L,</span><br><span class="line">          <span class="number">0xF3B97148</span>L, <span class="number">0x84BE41DE</span>L, <span class="number">0x1ADAD47D</span>L,</span><br><span class="line">          <span class="number">0x6DDDE4EB</span>L, <span class="number">0xF4D4B551</span>L, <span class="number">0x83D385C7</span>L,</span><br><span class="line">          <span class="number">0x136C9856</span>L, <span class="number">0x646BA8C0</span>L, <span class="number">0xFD62F97A</span>L,</span><br><span class="line">          <span class="number">0x8A65C9EC</span>L, <span class="number">0x14015C4F</span>L, <span class="number">0x63066CD9</span>L,</span><br><span class="line">          <span class="number">0xFA0F3D63</span>L, <span class="number">0x8D080DF5</span>L, <span class="number">0x3B6E20C8</span>L,</span><br><span class="line">          <span class="number">0x4C69105E</span>L, <span class="number">0xD56041E4</span>L, <span class="number">0xA2677172</span>L,</span><br><span class="line">          <span class="number">0x3C03E4D1</span>L, <span class="number">0x4B04D447</span>L, <span class="number">0xD20D85FD</span>L,</span><br><span class="line">          <span class="number">0xA50AB56B</span>L, <span class="number">0x35B5A8FA</span>L, <span class="number">0x42B2986C</span>L,</span><br><span class="line">          <span class="number">0xDBBBC9D6</span>L, <span class="number">0xACBCF940</span>L, <span class="number">0x32D86CE3</span>L,</span><br><span class="line">          <span class="number">0x45DF5C75</span>L, <span class="number">0xDCD60DCF</span>L, <span class="number">0xABD13D59</span>L,</span><br><span class="line">          <span class="number">0x26D930AC</span>L, <span class="number">0x51DE003A</span>L, <span class="number">0xC8D75180</span>L,</span><br><span class="line">          <span class="number">0xBFD06116</span>L, <span class="number">0x21B4F4B5</span>L, <span class="number">0x56B3C423</span>L,</span><br><span class="line">          <span class="number">0xCFBA9599</span>L, <span class="number">0xB8BDA50F</span>L, <span class="number">0x2802B89E</span>L,</span><br><span class="line">          <span class="number">0x5F058808</span>L, <span class="number">0xC60CD9B2</span>L, <span class="number">0xB10BE924</span>L,</span><br><span class="line">          <span class="number">0x2F6F7C87</span>L, <span class="number">0x58684C11</span>L, <span class="number">0xC1611DAB</span>L,</span><br><span class="line">          <span class="number">0xB6662D3D</span>L, <span class="number">0x76DC4190</span>L, <span class="number">0x01DB7106</span>L,</span><br><span class="line">          <span class="number">0x98D220BC</span>L, <span class="number">0xEFD5102A</span>L, <span class="number">0x71B18589</span>L,</span><br><span class="line">          <span class="number">0x06B6B51F</span>L, <span class="number">0x9FBFE4A5</span>L, <span class="number">0xE8B8D433</span>L,</span><br><span class="line">          <span class="number">0x7807C9A2</span>L, <span class="number">0x0F00F934</span>L, <span class="number">0x9609A88E</span>L,</span><br><span class="line">          <span class="number">0xE10E9818</span>L, <span class="number">0x7F6A0DBB</span>L, <span class="number">0x086D3D2D</span>L,</span><br><span class="line">          <span class="number">0x91646C97</span>L, <span class="number">0xE6635C01</span>L, <span class="number">0x6B6B51F4</span>L,</span><br><span class="line">          <span class="number">0x1C6C6162</span>L, <span class="number">0x856530D8</span>L, <span class="number">0xF262004E</span>L,</span><br><span class="line">          <span class="number">0x6C0695ED</span>L, <span class="number">0x1B01A57B</span>L, <span class="number">0x8208F4C1</span>L,</span><br><span class="line">          <span class="number">0xF50FC457</span>L, <span class="number">0x65B0D9C6</span>L, <span class="number">0x12B7E950</span>L,</span><br><span class="line">          <span class="number">0x8BBEB8EA</span>L, <span class="number">0xFCB9887C</span>L, <span class="number">0x62DD1DDF</span>L,</span><br><span class="line">          <span class="number">0x15DA2D49</span>L, <span class="number">0x8CD37CF3</span>L, <span class="number">0xFBD44C65</span>L,</span><br><span class="line">          <span class="number">0x4DB26158</span>L, <span class="number">0x3AB551CE</span>L, <span class="number">0xA3BC0074</span>L,</span><br><span class="line">          <span class="number">0xD4BB30E2</span>L, <span class="number">0x4ADFA541</span>L, <span class="number">0x3DD895D7</span>L,</span><br><span class="line">          <span class="number">0xA4D1C46D</span>L, <span class="number">0xD3D6F4FB</span>L, <span class="number">0x4369E96A</span>L,</span><br><span class="line">          <span class="number">0x346ED9FC</span>L, <span class="number">0xAD678846</span>L, <span class="number">0xDA60B8D0</span>L,</span><br><span class="line">          <span class="number">0x44042D73</span>L, <span class="number">0x33031DE5</span>L, <span class="number">0xAA0A4C5F</span>L,</span><br><span class="line">          <span class="number">0xDD0D7CC9</span>L, <span class="number">0x5005713C</span>L, <span class="number">0x270241AA</span>L,</span><br><span class="line">          <span class="number">0xBE0B1010</span>L, <span class="number">0xC90C2086</span>L, <span class="number">0x5768B525</span>L,</span><br><span class="line">          <span class="number">0x206F85B3</span>L, <span class="number">0xB966D409</span>L, <span class="number">0xCE61E49F</span>L,</span><br><span class="line">          <span class="number">0x5EDEF90E</span>L, <span class="number">0x29D9C998</span>L, <span class="number">0xB0D09822</span>L,</span><br><span class="line">          <span class="number">0xC7D7A8B4</span>L, <span class="number">0x59B33D17</span>L, <span class="number">0x2EB40D81</span>L,</span><br><span class="line">          <span class="number">0xB7BD5C3B</span>L, <span class="number">0xC0BA6CAD</span>L, <span class="number">0xEDB88320</span>L,</span><br><span class="line">          <span class="number">0x9ABFB3B6</span>L, <span class="number">0x03B6E20C</span>L, <span class="number">0x74B1D29A</span>L,</span><br><span class="line">          <span class="number">0xEAD54739</span>L, <span class="number">0x9DD277AF</span>L, <span class="number">0x04DB2615</span>L,</span><br><span class="line">          <span class="number">0x73DC1683</span>L, <span class="number">0xE3630B12</span>L, <span class="number">0x94643B84</span>L,</span><br><span class="line">          <span class="number">0x0D6D6A3E</span>L, <span class="number">0x7A6A5AA8</span>L, <span class="number">0xE40ECF0B</span>L,</span><br><span class="line">          <span class="number">0x9309FF9D</span>L, <span class="number">0x0A00AE27</span>L, <span class="number">0x7D079EB1</span>L,</span><br><span class="line">          <span class="number">0xF00F9344</span>L, <span class="number">0x8708A3D2</span>L, <span class="number">0x1E01F268</span>L,</span><br><span class="line">          <span class="number">0x6906C2FE</span>L, <span class="number">0xF762575D</span>L, <span class="number">0x806567CB</span>L,</span><br><span class="line">          <span class="number">0x196C3671</span>L, <span class="number">0x6E6B06E7</span>L, <span class="number">0xFED41B76</span>L,</span><br><span class="line">          <span class="number">0x89D32BE0</span>L, <span class="number">0x10DA7A5A</span>L, <span class="number">0x67DD4ACC</span>L,</span><br><span class="line">          <span class="number">0xF9B9DF6F</span>L, <span class="number">0x8EBEEFF9</span>L, <span class="number">0x17B7BE43</span>L,</span><br><span class="line">          <span class="number">0x60B08ED5</span>L, <span class="number">0xD6D6A3E8</span>L, <span class="number">0xA1D1937E</span>L,</span><br><span class="line">          <span class="number">0x38D8C2C4</span>L, <span class="number">0x4FDFF252</span>L, <span class="number">0xD1BB67F1</span>L,</span><br><span class="line">          <span class="number">0xA6BC5767</span>L, <span class="number">0x3FB506DD</span>L, <span class="number">0x48B2364B</span>L,</span><br><span class="line">          <span class="number">0xD80D2BDA</span>L, <span class="number">0xAF0A1B4C</span>L, <span class="number">0x36034AF6</span>L,</span><br><span class="line">          <span class="number">0x41047A60</span>L, <span class="number">0xDF60EFC3</span>L, <span class="number">0xA867DF55</span>L,</span><br><span class="line">          <span class="number">0x316E8EEF</span>L, <span class="number">0x4669BE79</span>L, <span class="number">0xCB61B38C</span>L,</span><br><span class="line">          <span class="number">0xBC66831A</span>L, <span class="number">0x256FD2A0</span>L, <span class="number">0x5268E236</span>L,</span><br><span class="line">          <span class="number">0xCC0C7795</span>L, <span class="number">0xBB0B4703</span>L, <span class="number">0x220216B9</span>L,</span><br><span class="line">          <span class="number">0x5505262F</span>L, <span class="number">0xC5BA3BBE</span>L, <span class="number">0xB2BD0B28</span>L,</span><br><span class="line">          <span class="number">0x2BB45A92</span>L, <span class="number">0x5CB36A04</span>L, <span class="number">0xC2D7FFA7</span>L,</span><br><span class="line">          <span class="number">0xB5D0CF31</span>L, <span class="number">0x2CD99E8B</span>L, <span class="number">0x5BDEAE1D</span>L,</span><br><span class="line">          <span class="number">0x9B64C2B0</span>L, <span class="number">0xEC63F226</span>L, <span class="number">0x756AA39C</span>L,</span><br><span class="line">          <span class="number">0x026D930A</span>L, <span class="number">0x9C0906A9</span>L, <span class="number">0xEB0E363F</span>L,</span><br><span class="line">          <span class="number">0x72076785</span>L, <span class="number">0x05005713</span>L, <span class="number">0x95BF4A82</span>L,</span><br><span class="line">          <span class="number">0xE2B87A14</span>L, <span class="number">0x7BB12BAE</span>L, <span class="number">0x0CB61B38</span>L,</span><br><span class="line">          <span class="number">0x92D28E9B</span>L, <span class="number">0xE5D5BE0D</span>L, <span class="number">0x7CDCEFB7</span>L,</span><br><span class="line">          <span class="number">0x0BDBDF21</span>L, <span class="number">0x86D3D2D4</span>L, <span class="number">0xF1D4E242</span>L,</span><br><span class="line">          <span class="number">0x68DDB3F8</span>L, <span class="number">0x1FDA836E</span>L, <span class="number">0x81BE16CD</span>L,</span><br><span class="line">          <span class="number">0xF6B9265B</span>L, <span class="number">0x6FB077E1</span>L, <span class="number">0x18B74777</span>L,</span><br><span class="line">          <span class="number">0x88085AE6</span>L, <span class="number">0xFF0F6A70</span>L, <span class="number">0x66063BCA</span>L,</span><br><span class="line">          <span class="number">0x11010B5C</span>L, <span class="number">0x8F659EFF</span>L, <span class="number">0xF862AE69</span>L,</span><br><span class="line">          <span class="number">0x616BFFD3</span>L, <span class="number">0x166CCF45</span>L, <span class="number">0xA00AE278</span>L,</span><br><span class="line">          <span class="number">0xD70DD2EE</span>L, <span class="number">0x4E048354</span>L, <span class="number">0x3903B3C2</span>L,</span><br><span class="line">          <span class="number">0xA7672661</span>L, <span class="number">0xD06016F7</span>L, <span class="number">0x4969474D</span>L,</span><br><span class="line">          <span class="number">0x3E6E77DB</span>L, <span class="number">0xAED16A4A</span>L, <span class="number">0xD9D65ADC</span>L,</span><br><span class="line">          <span class="number">0x40DF0B66</span>L, <span class="number">0x37D83BF0</span>L, <span class="number">0xA9BCAE53</span>L,</span><br><span class="line">          <span class="number">0xDEBB9EC5</span>L, <span class="number">0x47B2CF7F</span>L, <span class="number">0x30B5FFE9</span>L,</span><br><span class="line">          <span class="number">0xBDBDF21C</span>L, <span class="number">0xCABAC28A</span>L, <span class="number">0x53B39330</span>L,</span><br><span class="line">          <span class="number">0x24B4A3A6</span>L, <span class="number">0xBAD03605</span>L, <span class="number">0xCDD70693</span>L,</span><br><span class="line">          <span class="number">0x54DE5729</span>L, <span class="number">0x23D967BF</span>L, <span class="number">0xB3667A2E</span>L,</span><br><span class="line">          <span class="number">0xC4614AB8</span>L, <span class="number">0x5D681B02</span>L, <span class="number">0x2A6F2B94</span>L,</span><br><span class="line">          <span class="number">0xB40BBE37</span>L, <span class="number">0xC30C8EA1</span>L, <span class="number">0x5A05DF1B</span>L,</span><br><span class="line">          <span class="number">0x2D02EF8D</span>L &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">uint64_t</span> m_CRC64_Table[<span class="number">256</span>] = &#123;</span><br><span class="line">          <span class="number">0x0000000000000000</span>ULL, <span class="number">0x7ad870c830358979</span>ULL,</span><br><span class="line">          <span class="number">0xf5b0e190606b12f2</span>ULL, <span class="number">0x8f689158505e9b8b</span>ULL,</span><br><span class="line">          <span class="number">0xc038e5739841b68f</span>ULL, <span class="number">0xbae095bba8743ff6</span>ULL,</span><br><span class="line">          <span class="number">0x358804e3f82aa47d</span>ULL, <span class="number">0x4f50742bc81f2d04</span>ULL,</span><br><span class="line">          <span class="number">0xab28ecb46814fe75</span>ULL, <span class="number">0xd1f09c7c5821770c</span>ULL,</span><br><span class="line">          <span class="number">0x5e980d24087fec87</span>ULL, <span class="number">0x24407dec384a65fe</span>ULL,</span><br><span class="line">          <span class="number">0x6b1009c7f05548fa</span>ULL, <span class="number">0x11c8790fc060c183</span>ULL,</span><br><span class="line">          <span class="number">0x9ea0e857903e5a08</span>ULL, <span class="number">0xe478989fa00bd371</span>ULL,</span><br><span class="line">          <span class="number">0x7d08ff3b88be6f81</span>ULL, <span class="number">0x07d08ff3b88be6f8</span>ULL,</span><br><span class="line">          <span class="number">0x88b81eabe8d57d73</span>ULL, <span class="number">0xf2606e63d8e0f40a</span>ULL,</span><br><span class="line">          <span class="number">0xbd301a4810ffd90e</span>ULL, <span class="number">0xc7e86a8020ca5077</span>ULL,</span><br><span class="line">          <span class="number">0x4880fbd87094cbfc</span>ULL, <span class="number">0x32588b1040a14285</span>ULL,</span><br><span class="line">          <span class="number">0xd620138fe0aa91f4</span>ULL, <span class="number">0xacf86347d09f188d</span>ULL,</span><br><span class="line">          <span class="number">0x2390f21f80c18306</span>ULL, <span class="number">0x594882d7b0f40a7f</span>ULL,</span><br><span class="line">          <span class="number">0x1618f6fc78eb277b</span>ULL, <span class="number">0x6cc0863448deae02</span>ULL,</span><br><span class="line">          <span class="number">0xe3a8176c18803589</span>ULL, <span class="number">0x997067a428b5bcf0</span>ULL,</span><br><span class="line">          <span class="number">0xfa11fe77117cdf02</span>ULL, <span class="number">0x80c98ebf2149567b</span>ULL,</span><br><span class="line">          <span class="number">0x0fa11fe77117cdf0</span>ULL, <span class="number">0x75796f2f41224489</span>ULL,</span><br><span class="line">          <span class="number">0x3a291b04893d698d</span>ULL, <span class="number">0x40f16bccb908e0f4</span>ULL,</span><br><span class="line">          <span class="number">0xcf99fa94e9567b7f</span>ULL, <span class="number">0xb5418a5cd963f206</span>ULL,</span><br><span class="line">          <span class="number">0x513912c379682177</span>ULL, <span class="number">0x2be1620b495da80e</span>ULL,</span><br><span class="line">          <span class="number">0xa489f35319033385</span>ULL, <span class="number">0xde51839b2936bafc</span>ULL,</span><br><span class="line">          <span class="number">0x9101f7b0e12997f8</span>ULL, <span class="number">0xebd98778d11c1e81</span>ULL,</span><br><span class="line">          <span class="number">0x64b116208142850a</span>ULL, <span class="number">0x1e6966e8b1770c73</span>ULL,</span><br><span class="line">          <span class="number">0x8719014c99c2b083</span>ULL, <span class="number">0xfdc17184a9f739fa</span>ULL,</span><br><span class="line">          <span class="number">0x72a9e0dcf9a9a271</span>ULL, <span class="number">0x08719014c99c2b08</span>ULL,</span><br><span class="line">          <span class="number">0x4721e43f0183060c</span>ULL, <span class="number">0x3df994f731b68f75</span>ULL,</span><br><span class="line">          <span class="number">0xb29105af61e814fe</span>ULL, <span class="number">0xc849756751dd9d87</span>ULL,</span><br><span class="line">          <span class="number">0x2c31edf8f1d64ef6</span>ULL, <span class="number">0x56e99d30c1e3c78f</span>ULL,</span><br><span class="line">          <span class="number">0xd9810c6891bd5c04</span>ULL, <span class="number">0xa3597ca0a188d57d</span>ULL,</span><br><span class="line">          <span class="number">0xec09088b6997f879</span>ULL, <span class="number">0x96d1784359a27100</span>ULL,</span><br><span class="line">          <span class="number">0x19b9e91b09fcea8b</span>ULL, <span class="number">0x636199d339c963f2</span>ULL,</span><br><span class="line">          <span class="number">0xdf7adabd7a6e2d6f</span>ULL, <span class="number">0xa5a2aa754a5ba416</span>ULL,</span><br><span class="line">          <span class="number">0x2aca3b2d1a053f9d</span>ULL, <span class="number">0x50124be52a30b6e4</span>ULL,</span><br><span class="line">          <span class="number">0x1f423fcee22f9be0</span>ULL, <span class="number">0x659a4f06d21a1299</span>ULL,</span><br><span class="line">          <span class="number">0xeaf2de5e82448912</span>ULL, <span class="number">0x902aae96b271006b</span>ULL,</span><br><span class="line">          <span class="number">0x74523609127ad31a</span>ULL, <span class="number">0x0e8a46c1224f5a63</span>ULL,</span><br><span class="line">          <span class="number">0x81e2d7997211c1e8</span>ULL, <span class="number">0xfb3aa75142244891</span>ULL,</span><br><span class="line">          <span class="number">0xb46ad37a8a3b6595</span>ULL, <span class="number">0xceb2a3b2ba0eecec</span>ULL,</span><br><span class="line">          <span class="number">0x41da32eaea507767</span>ULL, <span class="number">0x3b024222da65fe1e</span>ULL,</span><br><span class="line">          <span class="number">0xa2722586f2d042ee</span>ULL, <span class="number">0xd8aa554ec2e5cb97</span>ULL,</span><br><span class="line">          <span class="number">0x57c2c41692bb501c</span>ULL, <span class="number">0x2d1ab4dea28ed965</span>ULL,</span><br><span class="line">          <span class="number">0x624ac0f56a91f461</span>ULL, <span class="number">0x1892b03d5aa47d18</span>ULL,</span><br><span class="line">          <span class="number">0x97fa21650afae693</span>ULL, <span class="number">0xed2251ad3acf6fea</span>ULL,</span><br><span class="line">          <span class="number">0x095ac9329ac4bc9b</span>ULL, <span class="number">0x7382b9faaaf135e2</span>ULL,</span><br><span class="line">          <span class="number">0xfcea28a2faafae69</span>ULL, <span class="number">0x8632586aca9a2710</span>ULL,</span><br><span class="line">          <span class="number">0xc9622c4102850a14</span>ULL, <span class="number">0xb3ba5c8932b0836d</span>ULL,</span><br><span class="line">          <span class="number">0x3cd2cdd162ee18e6</span>ULL, <span class="number">0x460abd1952db919f</span>ULL,</span><br><span class="line">          <span class="number">0x256b24ca6b12f26d</span>ULL, <span class="number">0x5fb354025b277b14</span>ULL,</span><br><span class="line">          <span class="number">0xd0dbc55a0b79e09f</span>ULL, <span class="number">0xaa03b5923b4c69e6</span>ULL,</span><br><span class="line">          <span class="number">0xe553c1b9f35344e2</span>ULL, <span class="number">0x9f8bb171c366cd9b</span>ULL,</span><br><span class="line">          <span class="number">0x10e3202993385610</span>ULL, <span class="number">0x6a3b50e1a30ddf69</span>ULL,</span><br><span class="line">          <span class="number">0x8e43c87e03060c18</span>ULL, <span class="number">0xf49bb8b633338561</span>ULL,</span><br><span class="line">          <span class="number">0x7bf329ee636d1eea</span>ULL, <span class="number">0x012b592653589793</span>ULL,</span><br><span class="line">          <span class="number">0x4e7b2d0d9b47ba97</span>ULL, <span class="number">0x34a35dc5ab7233ee</span>ULL,</span><br><span class="line">          <span class="number">0xbbcbcc9dfb2ca865</span>ULL, <span class="number">0xc113bc55cb19211c</span>ULL,</span><br><span class="line">          <span class="number">0x5863dbf1e3ac9dec</span>ULL, <span class="number">0x22bbab39d3991495</span>ULL,</span><br><span class="line">          <span class="number">0xadd33a6183c78f1e</span>ULL, <span class="number">0xd70b4aa9b3f20667</span>ULL,</span><br><span class="line">          <span class="number">0x985b3e827bed2b63</span>ULL, <span class="number">0xe2834e4a4bd8a21a</span>ULL,</span><br><span class="line">          <span class="number">0x6debdf121b863991</span>ULL, <span class="number">0x1733afda2bb3b0e8</span>ULL,</span><br><span class="line">          <span class="number">0xf34b37458bb86399</span>ULL, <span class="number">0x8993478dbb8deae0</span>ULL,</span><br><span class="line">          <span class="number">0x06fbd6d5ebd3716b</span>ULL, <span class="number">0x7c23a61ddbe6f812</span>ULL,</span><br><span class="line">          <span class="number">0x3373d23613f9d516</span>ULL, <span class="number">0x49aba2fe23cc5c6f</span>ULL,</span><br><span class="line">          <span class="number">0xc6c333a67392c7e4</span>ULL, <span class="number">0xbc1b436e43a74e9d</span>ULL,</span><br><span class="line">          <span class="number">0x95ac9329ac4bc9b5</span>ULL, <span class="number">0xef74e3e19c7e40cc</span>ULL,</span><br><span class="line">          <span class="number">0x601c72b9cc20db47</span>ULL, <span class="number">0x1ac40271fc15523e</span>ULL,</span><br><span class="line">          <span class="number">0x5594765a340a7f3a</span>ULL, <span class="number">0x2f4c0692043ff643</span>ULL,</span><br><span class="line">          <span class="number">0xa02497ca54616dc8</span>ULL, <span class="number">0xdafce7026454e4b1</span>ULL,</span><br><span class="line">          <span class="number">0x3e847f9dc45f37c0</span>ULL, <span class="number">0x445c0f55f46abeb9</span>ULL,</span><br><span class="line">          <span class="number">0xcb349e0da4342532</span>ULL, <span class="number">0xb1eceec59401ac4b</span>ULL,</span><br><span class="line">          <span class="number">0xfebc9aee5c1e814f</span>ULL, <span class="number">0x8464ea266c2b0836</span>ULL,</span><br><span class="line">          <span class="number">0x0b0c7b7e3c7593bd</span>ULL, <span class="number">0x71d40bb60c401ac4</span>ULL,</span><br><span class="line">          <span class="number">0xe8a46c1224f5a634</span>ULL, <span class="number">0x927c1cda14c02f4d</span>ULL,</span><br><span class="line">          <span class="number">0x1d148d82449eb4c6</span>ULL, <span class="number">0x67ccfd4a74ab3dbf</span>ULL,</span><br><span class="line">          <span class="number">0x289c8961bcb410bb</span>ULL, <span class="number">0x5244f9a98c8199c2</span>ULL,</span><br><span class="line">          <span class="number">0xdd2c68f1dcdf0249</span>ULL, <span class="number">0xa7f41839ecea8b30</span>ULL,</span><br><span class="line">          <span class="number">0x438c80a64ce15841</span>ULL, <span class="number">0x3954f06e7cd4d138</span>ULL,</span><br><span class="line">          <span class="number">0xb63c61362c8a4ab3</span>ULL, <span class="number">0xcce411fe1cbfc3ca</span>ULL,</span><br><span class="line">          <span class="number">0x83b465d5d4a0eece</span>ULL, <span class="number">0xf96c151de49567b7</span>ULL,</span><br><span class="line">          <span class="number">0x76048445b4cbfc3c</span>ULL, <span class="number">0x0cdcf48d84fe7545</span>ULL,</span><br><span class="line">          <span class="number">0x6fbd6d5ebd3716b7</span>ULL, <span class="number">0x15651d968d029fce</span>ULL,</span><br><span class="line">          <span class="number">0x9a0d8ccedd5c0445</span>ULL, <span class="number">0xe0d5fc06ed698d3c</span>ULL,</span><br><span class="line">          <span class="number">0xaf85882d2576a038</span>ULL, <span class="number">0xd55df8e515432941</span>ULL,</span><br><span class="line">          <span class="number">0x5a3569bd451db2ca</span>ULL, <span class="number">0x20ed197575283bb3</span>ULL,</span><br><span class="line">          <span class="number">0xc49581ead523e8c2</span>ULL, <span class="number">0xbe4df122e51661bb</span>ULL,</span><br><span class="line">          <span class="number">0x3125607ab548fa30</span>ULL, <span class="number">0x4bfd10b2857d7349</span>ULL,</span><br><span class="line">          <span class="number">0x04ad64994d625e4d</span>ULL, <span class="number">0x7e7514517d57d734</span>ULL,</span><br><span class="line">          <span class="number">0xf11d85092d094cbf</span>ULL, <span class="number">0x8bc5f5c11d3cc5c6</span>ULL,</span><br><span class="line">          <span class="number">0x12b5926535897936</span>ULL, <span class="number">0x686de2ad05bcf04f</span>ULL,</span><br><span class="line">          <span class="number">0xe70573f555e26bc4</span>ULL, <span class="number">0x9ddd033d65d7e2bd</span>ULL,</span><br><span class="line">          <span class="number">0xd28d7716adc8cfb9</span>ULL, <span class="number">0xa85507de9dfd46c0</span>ULL,</span><br><span class="line">          <span class="number">0x273d9686cda3dd4b</span>ULL, <span class="number">0x5de5e64efd965432</span>ULL,</span><br><span class="line">          <span class="number">0xb99d7ed15d9d8743</span>ULL, <span class="number">0xc3450e196da80e3a</span>ULL,</span><br><span class="line">          <span class="number">0x4c2d9f413df695b1</span>ULL, <span class="number">0x36f5ef890dc31cc8</span>ULL,</span><br><span class="line">          <span class="number">0x79a59ba2c5dc31cc</span>ULL, <span class="number">0x037deb6af5e9b8b5</span>ULL,</span><br><span class="line">          <span class="number">0x8c157a32a5b7233e</span>ULL, <span class="number">0xf6cd0afa9582aa47</span>ULL,</span><br><span class="line">          <span class="number">0x4ad64994d625e4da</span>ULL, <span class="number">0x300e395ce6106da3</span>ULL,</span><br><span class="line">          <span class="number">0xbf66a804b64ef628</span>ULL, <span class="number">0xc5bed8cc867b7f51</span>ULL,</span><br><span class="line">          <span class="number">0x8aeeace74e645255</span>ULL, <span class="number">0xf036dc2f7e51db2c</span>ULL,</span><br><span class="line">          <span class="number">0x7f5e4d772e0f40a7</span>ULL, <span class="number">0x05863dbf1e3ac9de</span>ULL,</span><br><span class="line">          <span class="number">0xe1fea520be311aaf</span>ULL, <span class="number">0x9b26d5e88e0493d6</span>ULL,</span><br><span class="line">          <span class="number">0x144e44b0de5a085d</span>ULL, <span class="number">0x6e963478ee6f8124</span>ULL,</span><br><span class="line">          <span class="number">0x21c640532670ac20</span>ULL, <span class="number">0x5b1e309b16452559</span>ULL,</span><br><span class="line">          <span class="number">0xd476a1c3461bbed2</span>ULL, <span class="number">0xaeaed10b762e37ab</span>ULL,</span><br><span class="line">          <span class="number">0x37deb6af5e9b8b5b</span>ULL, <span class="number">0x4d06c6676eae0222</span>ULL,</span><br><span class="line">          <span class="number">0xc26e573f3ef099a9</span>ULL, <span class="number">0xb8b627f70ec510d0</span>ULL,</span><br><span class="line">          <span class="number">0xf7e653dcc6da3dd4</span>ULL, <span class="number">0x8d3e2314f6efb4ad</span>ULL,</span><br><span class="line">          <span class="number">0x0256b24ca6b12f26</span>ULL, <span class="number">0x788ec2849684a65f</span>ULL,</span><br><span class="line">          <span class="number">0x9cf65a1b368f752e</span>ULL, <span class="number">0xe62e2ad306bafc57</span>ULL,</span><br><span class="line">          <span class="number">0x6946bb8b56e467dc</span>ULL, <span class="number">0x139ecb4366d1eea5</span>ULL,</span><br><span class="line">          <span class="number">0x5ccebf68aecec3a1</span>ULL, <span class="number">0x2616cfa09efb4ad8</span>ULL,</span><br><span class="line">          <span class="number">0xa97e5ef8cea5d153</span>ULL, <span class="number">0xd3a62e30fe90582a</span>ULL,</span><br><span class="line">          <span class="number">0xb0c7b7e3c7593bd8</span>ULL, <span class="number">0xca1fc72bf76cb2a1</span>ULL,</span><br><span class="line">          <span class="number">0x45775673a732292a</span>ULL, <span class="number">0x3faf26bb9707a053</span>ULL,</span><br><span class="line">          <span class="number">0x70ff52905f188d57</span>ULL, <span class="number">0x0a2722586f2d042e</span>ULL,</span><br><span class="line">          <span class="number">0x854fb3003f739fa5</span>ULL, <span class="number">0xff97c3c80f4616dc</span>ULL,</span><br><span class="line">          <span class="number">0x1bef5b57af4dc5ad</span>ULL, <span class="number">0x61372b9f9f784cd4</span>ULL,</span><br><span class="line">          <span class="number">0xee5fbac7cf26d75f</span>ULL, <span class="number">0x9487ca0fff135e26</span>ULL,</span><br><span class="line">          <span class="number">0xdbd7be24370c7322</span>ULL, <span class="number">0xa10fceec0739fa5b</span>ULL,</span><br><span class="line">          <span class="number">0x2e675fb4576761d0</span>ULL, <span class="number">0x54bf2f7c6752e8a9</span>ULL,</span><br><span class="line">          <span class="number">0xcdcf48d84fe75459</span>ULL, <span class="number">0xb71738107fd2dd20</span>ULL,</span><br><span class="line">          <span class="number">0x387fa9482f8c46ab</span>ULL, <span class="number">0x42a7d9801fb9cfd2</span>ULL,</span><br><span class="line">          <span class="number">0x0df7adabd7a6e2d6</span>ULL, <span class="number">0x772fdd63e7936baf</span>ULL,</span><br><span class="line">          <span class="number">0xf8474c3bb7cdf024</span>ULL, <span class="number">0x829f3cf387f8795d</span>ULL,</span><br><span class="line">          <span class="number">0x66e7a46c27f3aa2c</span>ULL, <span class="number">0x1c3fd4a417c62355</span>ULL,</span><br><span class="line">          <span class="number">0x935745fc4798b8de</span>ULL, <span class="number">0xe98f353477ad31a7</span>ULL,</span><br><span class="line">          <span class="number">0xa6df411fbfb21ca3</span>ULL, <span class="number">0xdc0731d78f8795da</span>ULL,</span><br><span class="line">          <span class="number">0x536fa08fdfd90e51</span>ULL, <span class="number">0x29b7d047efec8728</span>ULL,</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">uint32_t</span> CRC::GetHash32 (<span class="keyword">const</span> <span class="keyword">char</span>* buffer, <span class="keyword">const</span> <span class="keyword">size_t</span> size)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">uint32_t</span> uiCRC32 = <span class="number">0xFFFFFFFF</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> *pszData = (<span class="keyword">unsigned</span> <span class="keyword">char</span>*)buffer;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i&lt;size; ++i)</span><br><span class="line">          uiCRC32 = ((uiCRC32 &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0x00FFFFFF</span>) ^ m_CRC32_Table[(uiCRC32 ^ (<span class="keyword">uint32_t</span>)*pszData++) &amp; <span class="number">0xFF</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (uiCRC32 ^ <span class="number">0xFFFFFFFF</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">uint64_t</span> CRC::GetHash64 (<span class="keyword">const</span> <span class="keyword">char</span>* buffer, <span class="keyword">const</span> <span class="keyword">size_t</span> size)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">uint32_t</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">uint64_t</span> crc = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; size; j++) &#123;</span><br><span class="line">          <span class="keyword">uint8_t</span> byte = buffer[j];</span><br><span class="line">          crc = m_CRC64_Table[(<span class="keyword">uint8_t</span>)crc ^ byte] ^ (crc &gt;&gt; <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> crc;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">void</span> CRC::clear (<span class="keyword">void</span>)</span><br><span class="line">      &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="comment">//end of namespace Function</span></span><br><span class="line">  &#125;<span class="comment">//end of namespace Hash</span></span><br><span class="line">&#125;<span class="comment">//end of namespace ns3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> </span><br><span class="line">main (<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span><br><span class="line">&#123;</span><br><span class="line">  LogComponentEnable(<span class="string">"TryClassHash"</span>, LOG_LEVEL_INFO);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">key</span> <span class="params">(<span class="string">"The quick brown fox jumped over the lazy dogs."</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  Hasher hasher(Create&lt;ns3::Hash::Function::CRC&gt; ());</span><br><span class="line">  <span class="keyword">uint32_t</span> hash32 = hasher.clear().GetHash32(key);  <span class="comment">//对于我们的实现调不调用clear都一样</span></span><br><span class="line">  <span class="keyword">uint64_t</span> hash64 = hasher.clear().GetHash64(key);</span><br><span class="line"></span><br><span class="line">  NS_LOG_INFO(<span class="string">"32bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">8</span>) &lt;&lt; hash32 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line">  NS_LOG_INFO(<span class="string">"64bit hash: 0x"</span>  &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="built_in">std</span>::setw (<span class="number">16</span>) &lt;&lt; hash64 &lt;&lt; <span class="built_in">std</span>::dec);</span><br><span class="line"></span><br><span class="line">  Simulator::Run ();</span><br><span class="line">  Simulator::Destroy ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行得到如下结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Waf: Entering directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">[1918/2059] Compiling scratch/try-class-hash.cc</span><br><span class="line">[2019/2059] Linking build/scratch/try-class-hash</span><br><span class="line">Waf: Leaving directory `/home/rainsia/Applications/ns-allinone-3.29/ns-3.29/build&apos;</span><br><span class="line">Build commands will be stored in build/compile_commands.json</span><br><span class="line">&apos;build&apos; finished successfully (12.296s)</span><br><span class="line">32bit hash: 0x999142a1</span><br><span class="line">64bit hash: 0xc417fd9c29ee4733</span><br></pre></td></tr></table></figure>
<p>可见，轻松的实现自己的哈希算法。</p>

      
    </div>

    

    
    
    

    

    

		<div>
					
						
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2018/11/22/ns3-014/">NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions）</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 Rain Sia <rainsia@163.com> 的个人博客">Rain Sia <rainsia@163.com></a></p>
  <p><span>发布时间:</span>2018年11月22日 - 09:11</p>
  <p><span>最后更新:</span>2018年11月22日 - 21:11</p>
  <p><span>原始链接:</span>
		<a href="/2018/11/22/ns3-014/" title="NS-3学习笔记（十四）：NS-3中使用哈希函数（Hash functions）">
			http://rainsia.gitee.io/2018/11/22/ns3-014/
		</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://rainsia.gitee.io/2018/11/22/ns3-014/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>版权信息:</span>本文为作者原创文章，如需进行非商业性转载，请注明出处并保留原文链接及作者。如要进行商业性转载，请获得作者授权！</p>  
  <p><span>联系方式:</span>rainsia@163.com</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>


					
		</div>

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/NS-3/" rel="tag"># NS-3</a>
          
            <a href="/tags/C/" rel="tag"># C++</a>
          
            <a href="/tags/Simulation/" rel="tag"># Simulation</a>
          
            <a href="/tags/Hashing/" rel="tag"># Hashing</a>
          
            <a href="/tags/Hash-Functions/" rel="tag"># Hash Functions</a>
          
            <a href="/tags/murmur3/" rel="tag"># murmur3</a>
          
            <a href="/tags/FNV1a/" rel="tag"># FNV1a</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/17/ns3-013/" rel="next" title="NS-3学习笔记（十三）：随机数生成器">
                <i class="fa fa-chevron-left"></i> NS-3学习笔记（十三）：随机数生成器
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="Rain Sia <rainsia@163.com>" />
            
              <p class="site-author-name" itemprop="name">Rain Sia <rainsia@163.com></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">48</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-哈希函数简介"><span class="nav-text">1. 哈希函数简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-NS-3哈希算法的使用"><span class="nav-text">2. NS-3哈希算法的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-简单的用法"><span class="nav-text">2.1. 简单的用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-进阶版用法"><span class="nav-text">2.2. 进阶版用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-分段（增量）哈希"><span class="nav-text">2.3. 分段（增量）哈希</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-添加自定义的哈希算法"><span class="nav-text">3. 添加自定义的哈希算法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-添加哈希函数"><span class="nav-text">3.1. 添加哈希函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-添加哈希类"><span class="nav-text">3.2. 添加哈希类</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rain Sia, All rights reserved.<br/>本站所有原创文章，如进行非商业目的转载，请注明出处。若要进行商业目的转载，必须取得授权。<br/>--作者</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.5.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Gemini</a> v6.4.2</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'KSHKjGm3HfpWAPzaHoA4NV0H-gzGzoHsz',
        appKey: '55JA7fexBRQej1dHDpuxfTA0',
        placeholder: 'Just go go',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });
  </script>



  





  

  

  

  
  

  
  

  


  
  

  

  

  

  

  

</body>
</html>
